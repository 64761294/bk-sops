(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1023:function(e,t,n){},1024:function(e,t,n){},1025:function(e,t,n){},1026:function(e,t,n){},1027:function(e,t,n){},1028:function(e,t,n){},1029:function(e,t,n){},1030:function(e,t,n){},1234:function(e,t,n){"use strict";n(1023)},1235:function(e,t,n){"use strict";n(1024)},1236:function(e,t,n){"use strict";n(1025)},1237:function(e,t,n){"use strict";n(1026)},1238:function(e,t,n){"use strict";n(1027)},1239:function(e,t,n){"use strict";n(1028)},1240:function(e,t,n){"use strict";n(1029)},1241:function(e,t,n){"use strict";n(1030)},571:function(e,t,n){"use strict";n.r(t);n(26),n(38),n(37),n(49),n(22),n(50);var i=n(5),a=n.n(i),r=n(16),s=n.n(r),o=n(4),c=n.n(o),l=(n(27),n(1)),d={name:"PanelNodata",props:{text:{type:String,default:l.a.t("暂无数据")}},data:function(){return{}},created:function(){}},u=(n(1234),n(9)),p=Object(u.a)(d,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"panel-nodata"},[t("p",{staticClass:"text"},[this._v(this._s(this.text))]),this._v(" "),t("div",{staticClass:"des"},[this._t("default")],2)])}),[],!1,null,"79aeae47",null).exports,m=n(7),h=n(28),f=n(57);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={name:"CommonlyUsed",components:{PanelNodata:p},filters:{getTimeZone:function(e){var t=/\+(\d)+$/g.exec(e);return t?t[0]:""}},data:function(){return{commonlyUsedloading:!1,commonUsedList:[],viewIndex:0,limit:4}},computed:{isShowNextBtn:function(){return(this.commonUsedList.length-this.limit*(this.viewIndex+1))/this.limit>0}},created:function(){this.onWindowResize=h.a.debounce(this.handlerWindowResize,300)},mounted:function(){var e=this;return s()(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.addEventListener("resize",e.onWindowResize,!1),t.next=3,e.initData();case 3:e.handlerWindowResize();case 4:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){window.removeEventListener("resize",this.onWindowResize,!1)},methods:b(b(b({},Object(m.b)("project/",["changeDefaultProject","loadCommonProject"])),Object(m.d)("project",["setProjectId"])),{},{initData:function(){var e=this;return s()(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.commonlyUsedloading=!0,t.next=4,e.loadCommonProject();case 4:n=t.sent,e.commonUsedList=n.objects,e.commonlyUsedloading=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getLimit:function(){return document.body.clientWidth>1920?6:4},jumpToOther:function(e){var t="bk_iam"===e?window.BK_IAM_APP_CODE:e,n={bk_iam:window.BK_IAM_SAAS_HOST,bk_cmdb:window.BK_CC_HOST};Object(f.a)(t,n[e])},onSwitchBusiness:function(e){window.reportInfo({page:"home",zone:"commonUsed",event:"click"}),this.setProjectId(e),this.changeDefaultProject(e),this.$router.push({name:"process",params:{project_id:e}})},onShowPrevPage:function(){this.viewIndex-=1,this.changeViewIndex()},onShowNextPage:function(){this.viewIndex+=1,this.changeViewIndex()},changeViewIndex:function(){var e=this.$refs.cardList,t=this.$refs.cardView.offsetWidth;e.style.transform="translateX(-".concat(this.viewIndex*t,"px)")},handlerWindowResize:function(){var e=this.$refs.cardView,t=document.querySelector(".my-collection .card-list .card-item");this.commonUsedList&&0!==this.commonUsedList.length&&e&&t&&(this.limit=Math.floor(e.offsetWidth/t.offsetWidth),this.viewIndex=0,this.changeViewIndex())}})},_=(n(1235),Object(u.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.commonlyUsedloading,opacity:1,zIndex:100},expression:"{ isLoading: commonlyUsedloading, opacity: 1, zIndex: 100 }"}],staticClass:"common-used"},[n("h3",{staticClass:"panel-title"},[e._v(e._s(e.$t("常用项目")))]),e._v(" "),n("router-link",{staticClass:"link-btn",attrs:{to:{name:"projectHome"}}},[e._v(e._s(e.$t("全部项目")))]),e._v(" "),e.commonUsedList.length?n("div",{ref:"cardView",staticClass:"card-view"},[n("ul",{ref:"cardList",staticClass:"card-list scroll-body"},e._l(e.commonUsedList,(function(t,i){return n("li",{key:i,staticClass:"card-item",on:{click:function(n){return e.onSwitchBusiness(t.project.id)}}},[n("p",{staticClass:"business-name"},[e._v(e._s(t.project.name))]),e._v(" "),n("div",{staticClass:"business-info"},[n("p",{staticClass:"info-item"},[n("label",{staticClass:"label"},[e._v(e._s(e.$t("项目id：")))]),e._v(" "),n("span",{staticClass:"text"},[e._v(e._s(t.project.id))])]),e._v(" "),n("p",{staticClass:"info-item"},[n("label",{staticClass:"label"},[e._v(e._s(e.$t("时区：")))]),e._v(" "),n("span",{staticClass:"text"},[e._v(e._s(t.project.time_zone))])])])])})),0)]):n("panel-nodata",[n("span",[e._v(e._s(e.$t("项目，项目集的权限请前往")))]),e._v(" "),n("span",{staticClass:"link-text",on:{click:function(t){return e.jumpToOther("bk_iam")}}},[e._v(e._s(e.$t("权限中心")))]),e._v(" "),n("span",[e._v(e._s(e.$t("进行申请；如需新建项目，项目集请前往")))]),e._v(" "),n("span",{staticClass:"link-text",on:{click:function(t){return e.jumpToOther("bk_cmdb")}}},[e._v(e._s(e.$t("配置平台")))])]),e._v(" "),e.viewIndex>0?n("span",{staticClass:"button-prev common-icon-prev-triangle-shape",on:{click:e.onShowPrevPage}}):e._e(),e._v(" "),e.isShowNextBtn?n("span",{staticClass:"button-next common-icon-next-triangle-shape",on:{click:e.onShowNextPage}}):e._e()],1)}),[],!1,null,"2761e2d4",null).exports),w=n(0),k=n.n(w),y=(n(23),n(995)),C=(n(127),n(80),n(101),n(39),n(185),n(314),n(184),n(129),n(611)),j=n(102);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=[{name:l.a.t("选择类型"),id:"type",children:[{name:l.a.t("公共流程"),id:"common_flow"},{name:l.a.t("项目流程"),id:"flow"},{name:l.a.t("周期任务"),id:"periodic_task"},{name:l.a.t("轻应用"),id:"mini_app"}]},{name:l.a.t("选择项目"),id:"project",children:[]}],D={name:"AddCollectionDialog",components:{NoData:C.a},mixins:[j.a],props:{isAddCollectionDialogShow:{type:Boolean,default:!1},collectionList:{type:Array,default:function(){return k()(this,void 0),[]}.bind(void 0)}},data:function(){return{selectError:!1,collectionPending:!1,panelList:[],selectedList:[],savePending:!1,filterList:[],searchValue:[{id:"type",name:l.a.t("选择类型"),values:[{id:"common_flow",name:l.a.t("公共流程")}]}]}},computed:x(x({},Object(m.e)("project",{projectList:function(e){return k()(this,void 0),e.userProjectList}.bind(void 0)})),{},{searchOptionalList:{get:function(){var e=this;return this.filterList.map(function(t){return k()(this,e),"project"===t.id&&(t.children=this.projectList),t}.bind(this))},set:function(e){this.filterList=e}},listItemType:function(){var e=this,t=this.searchValue.find(function(t){return k()(this,e),"type"===t.id}.bind(this));return t?t.values[0].id:""},viewPermission:function(){return"".concat(this.listItemType,"_view")}}),watch:{isAddCollectionDialogShow:function(e){e&&(this.searchValue=[{id:"type",name:l.a.t("选择类型"),values:[{id:"common_flow",name:l.a.t("公共流程")}]}],this.selectError=!1,this.savePending=!1,this.panelList=[],this.selectedList=[],this.getData())}},methods:x(x(x(x(x({},Object(m.b)(["addToCollectList"])),Object(m.b)("templateList/",["loadTemplateList"])),Object(m.b)("appmaker",["loadAppmaker"])),Object(m.b)("periodic/",["loadPeriodicList"])),{},{getData:function(){var e=this;return s()(c.a.mark((function t(){var n,i,a,r,s,o=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.panelList=[],t.prev=1,n=[],i="",a="",e.searchValue.forEach(function(e){k()(this,o),"type"===e.id?i=e.values[0].id:"project"===e.id?r=e.values[0].id:a+=e.id}.bind(this)),"common_flow"===i||r){t.next=8;break}return t.abrupt("return",!1);case 8:e.collectionPending=!0,t.t0=i,t.next="common_flow"===t.t0?12:"flow"===t.t0?16:"periodic_task"===t.t0?20:"mini_app"===t.t0?24:28;break;case 12:return t.next=14,e.getTemplateList(1,a);case 14:return n=t.sent,t.abrupt("break",29);case 16:return t.next=18,e.getTemplateList(!1,a,r);case 18:return n=t.sent,t.abrupt("break",29);case 20:return t.next=22,e.getPeriodicList(r,a);case 22:return n=t.sent,t.abrupt("break",29);case 24:return t.next=26,e.getAppMakerList(r,a);case 26:return n=t.sent,t.abrupt("break",29);case 28:n=[];case 29:s=e.getFilterCollected(n),e.panelList=e.getGroupData(s,i),e.panelList=s,e.collectionPending=!1,t.next=38;break;case 35:t.prev=35,t.t1=t.catch(1),console.log(t.t1);case 38:case"end":return t.stop()}}),t,this,[[1,35]])})))()},getTemplateList:function(e,t,n){var i=this;return s()(c.a.mark((function a(){var r;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.loadTemplateList({common:e||void 0,project__id:n||void 0,pipeline_template__name__icontains:t||void 0});case 2:return r=a.sent,a.abrupt("return",r.objects||[]);case 4:case"end":return a.stop()}}),a)})))()},getAppMakerList:function(e,t){var n=this;return s()(c.a.mark((function i(){var a;return c.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.loadAppmaker({project__id:e,q:t||void 0});case 2:return a=i.sent,i.abrupt("return",a.objects||[]);case 4:case"end":return i.stop()}}),i)})))()},getPeriodicList:function(e,t){var n=this;return s()(c.a.mark((function i(){var a;return c.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.loadPeriodicList({project__id:e,task__name__icontains:t||void 0});case 2:return a=i.sent,i.abrupt("return",a.objects||[]);case 4:case"end":return i.stop()}}),i)})))()},getGroupData:function(e,t){var n=this,i=[],a=[];return e.forEach(function(e){k()(this,n),e.collectType=t;var r=i.indexOf(e.category);-1!==r?a[r].children.push(e):(i.push(e.category),a.push({name:e.category_name||e.category,children:[e]}))}.bind(this)),a},getFilterCollected:function(e){var t=this;return e.filter(function(e){k()(this,t);for(var n=0;n<this.collectionList.length;n++){var i=this.collectionList[n];if(e.id===i.extra_info.id&&e.name===i.extra_info.name)return!1}return!0}.bind(this))},getTemplateIcon:function(e){return e.name.trim().substr(0,1).toUpperCase()},onSelectItem:function(e){if(this.hasPermission([this.viewPermission],e.auth_actions)){this.selectError=!1;var t=this.getTplIndexInSelected(e);t>-1?this.selectedList.splice(t,1):this.selectedList.push(e)}else{var n=a()({},this.listItemType,[e]);"common_flow"!==this.listItemType&&(n.project=[{id:e.project.id,name:e.project.name}]),this.applyForPermission([this.viewPermission],e.auth_actions,n)}},onUnselectItem:function(e){var t=this.getTplIndexInSelected(e);this.selectedList.splice(t,1)},filterSelectItem:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.searchValue,n=t.filter(function(t){return k()(this,e),t.id&&("type"===t.id||"project"===t.id)}.bind(this));switch(n.length){case 0:this.searchOptionalList=h.a.deepClone(P);break;case 1:var i=n[0];if("type"===i.id){if("common_flow"===i.values[0].id){this.searchOptionalList=[];break}this.searchOptionalList=[h.a.deepClone(P[1])];break}var a=h.a.deepClone(P[0]);a.children.splice(0,1),this.searchOptionalList=[a];break;default:this.searchOptionalList=[]}},onSearchChange:function(e){this.filterSelectItem(e),this.getData()},getTplIndexInSelected:function(e){var t=this;return this.selectedList.findIndex(function(n){return k()(this,t),n.id===e.id}.bind(this))},onConfirm:function(){var e=this;return s()(c.a.mark((function t(){var n,i,a,r=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.selectedList.length){t.next=3;break}return e.selectError=!0,t.abrupt("return",!1);case 3:return e.savePending=!0,(n=e.searchValue.find(function(e){return k()(this,r),"project"===e.id}.bind(this)))&&(i=n.values[0].id),a=e.selectedList.map(function(t){return k()(this,r),{extra_info:e.getExtraInfo(t,t.collectType,i),category:t.collectType}}.bind(this)),t.prev=7,t.next=10,e.addToCollectList(a);case 10:t.sent.objects&&(e.$bkMessage({message:l.a.t("保存成功"),theme:"success"}),e.$emit("onCloseDialog",!0)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(7),console.log(t.t0);case 17:return t.prev=17,e.savePending=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[7,14,17,20]])})))()},getExtraInfo:function(e,t,n){var i={};switch(t){case"common_flow":i={template_id:e.template_id,name:e.name,id:e.id};break;case"flow":i={project_id:n,template_id:e.template_id,template_source:e.template_source,name:e.name,id:e.id};break;case"periodic_task":i={project_id:n,template_id:e.template_id,name:e.name,id:e.id};break;case"mini_app":i={app_id:e.id,project_id:n,template_id:e.template_id,name:e.name,id:e.id}}return i},onCancel:function(){this.$emit("onCloseDialog")},onChipDel:function(e){var t=this,n=this.$refs.bkSearchSelect;this.$nextTick(function(){k()(this,t),n&&n.showMenu()}.bind(this))}})},L=(n(1236),Object(u.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("bk-dialog",{attrs:{width:"850","ext-cls":"common-dialog add-collection",title:e.$t(""),"mask-close":!1,value:e.isAddCollectionDialogShow,"header-position":"left","auto-close":!1,loading:e.savePending},on:{confirm:e.onConfirm,cancel:e.onCancel}},[n("div",{staticClass:"export-container"},[n("div",{staticClass:"template-wrapper"},[n("div",{staticClass:"search-wrapper"},[n("bk-search-select",{ref:"bkSearchSelect",attrs:{"popover-zindex":3e3,"show-condition":!1,data:e.searchOptionalList,"show-popover-tag-change":0!==e.searchOptionalList.length},on:{change:e.onSearchChange,"chip-del":e.onChipDel},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e._v(" "),n("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.collectionPending,opacity:1,zIndex:100},expression:"{ isLoading: collectionPending, opacity: 1, zIndex: 100 }"}],staticClass:"template-list"},[n("ul",{staticClass:"grouped-list"},[e._l(e.panelList,(function(t){return[n("li",{key:t.id,class:["template-item",{"template-item-selected":e.getTplIndexInSelected(t)>-1,"permission-disable":!e.hasPermission([e.viewPermission],t.auth_actions)}],attrs:{title:t.name},on:{click:function(n){return e.onSelectItem(t)}}},[n("div",{staticClass:"template-item-icon"},[e._v(e._s(e.getTemplateIcon(t)))]),e._v(" "),n("div",{staticClass:"item-name-box"},[n("div",{staticClass:"template-item-name"},[e._v(e._s(t.name))])]),e._v(" "),n("div",{staticClass:"apply-permission-mask"},[n("bk-button",{attrs:{theme:"primary",size:"small"}},[e._v(e._s(e.$t("申请权限")))])],1)])]})),e._v(" "),e.panelList.length?e._e():n("NoData",{staticClass:"empty-template"})],2)])]),e._v(" "),n("div",{staticClass:"selected-wrapper"},[n("div",{staticClass:"selected-area-title"},[e._v("\n                "+e._s(e.$t("已选择"))+"\n                "),n("span",{staticClass:"select-count"},[e._v(e._s(e.selectedList.length))]),e._v("\n                "+e._s(e.$t("项"))+"\n            ")]),e._v(" "),n("ul",{staticClass:"selected-list"},e._l(e.selectedList,(function(t){return n("li",{key:t.id,staticClass:"selected-item"},[n("div",{staticClass:"selected-item-icon"},[n("span",{staticClass:"selected-name",attrs:{title:t.name}},[e._v(e._s(e.getTemplateIcon(t)))])]),e._v(" "),n("div",{staticClass:"item-name-box"},[n("div",{staticClass:"selected-item-name"},[e._v(e._s(t.name))])]),e._v(" "),n("i",{staticClass:"selected-delete bk-icon icon-close-circle-shape",on:{click:function(n){return e.onUnselectItem(t)}}})])})),0)]),e._v(" "),e.selectError?n("div",{staticClass:"task-footer"},[n("span",{staticClass:"error-info"},[e._v(e._s(e.$t("请选择收藏项")))])]):e._e()])])}),[],!1,null,"31313c4e",null).exports),S=n(51),T=n.n(S);n(24);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $={name:"SelectCreateTaskDialog",components:{},mixins:[j.a],props:{isCreateTaskDialogShow:Boolean,createTaskItem:Object},data:function(){return{loadingStatus:{taskType:!1,project:!1,taskContainer:!1},taskTypeList:[{name:l.a.t("普通任务"),value:"taskflow"},{name:l.a.t("周期任务"),value:"periodic"}],rules:{taskType:[{required:!0,message:"必填项",trigger:"blur"}],selectedProject:[{required:!0,message:"必填项",trigger:"blur"}]},formData:{taskType:"",selectedProject:""},isShowtaskError:!1,isShowProjectError:!1,permissionLoading:!1,hasUseCommonTplPerm:!0}},computed:E(E(E({},Object(m.e)({permissionMeta:function(e){return k()(this,void 0),e.permissionMeta}.bind(void 0)})),Object(m.e)("project",{projectList:function(e){return k()(this,void 0),e.userProjectList}.bind(void 0)})),{},{createTaskPerm:function(){return"taskflow"===this.formData.taskType?["common_flow_create_task"]:["common_flow_create_periodic_task"]}}),watch:{isCreateTaskDialogShow:function(e){e&&(this.formData.taskType="",this.formData.selectedProject="",this.isShowtaskError=!1,this.isShowProjectError=!1,this.hasUseCommonTplPerm=!0)}},methods:E(E({},Object(m.b)(["queryUserPermission"])),{},{onConfirm:function(){var e=this.createTaskItem.extra_info.template_id;if(this.checkEmpty()&&!this.permissionLoading)if(this.hasUseCommonTplPerm){var t="periodic"===this.formData.taskType?"periodicTask":void 0;this.$router.push({name:"taskCreate",params:{project_id:this.formData.selectedProject,step:"selectnode"},query:{template_id:e,common:"1",entrance:t}})}else this.applyUseCommonPerm()},onCancel:function(){this.$emit("cancel")},checkEmpty:function(){return this.isShowtaskError=!this.formData.taskType,this.isShowProjectError=!this.formData.selectedProject,!(!this.formData.taskType||!this.formData.selectedProject)},checkPermission:function(){var e=this;return s()(c.a.mark((function t(){var n,i,a,r,s,o=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.checkEmpty(),n=e.formData,i=n.taskType,a=n.selectedProject,!i||!a){t.next=19;break}return t.prev=3,e.permissionLoading=!0,r=e.permissionMeta.system.find(function(e){return k()(this,o),"bk_sops"===e.id}.bind(this)),s={action:e.createTaskPerm[0],resources:[{system:r.id,type:"project",id:e.formData.selectedProject,attributes:{}},{system:r.id,type:"common_flow",id:e.createTaskItem.id,attributes:{}}]},t.next=9,e.queryUserPermission(s);case 9:t.sent.data.is_allow?e.hasUseCommonTplPerm=!0:e.hasUseCommonTplPerm=!1,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0);case 16:return t.prev=16,e.permissionLoading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,this,[[3,13,16,19]])})))()},applyUseCommonPerm:function(){var e=this,t=this.projectList.find(function(t){return k()(this,e),t.id===this.formData.selectedProject}.bind(this)),n=[].concat(T()(this.createTaskItem.auth_actions),T()(t.auth_actions)),i={common_flow:[{id:this.createTaskItem.extra_info.template_id,name:this.createTaskItem.extra_info.name}],project:[{id:t.name,name:t.name}]};this.applyForPermission(this.createTaskPerm,n,i)}})},M=(n(1237),Object(u.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("bk-dialog",{attrs:{width:"600","render-directive":"if","ext-cls":"common-dialog",title:e.$t("创建任务"),"mask-close":!1,value:e.isCreateTaskDialogShow,"header-position":"left","auto-close":!1},on:{cancel:e.onCancel}},[n("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.loadingStatus.taskContainer,opacity:1,zIndex:100},expression:"{ isLoading: loadingStatus.taskContainer, opacity: 1, zIndex: 100 }"}],staticClass:"task-create-container"},[n("bk-form",{ref:"taskCreateForm",attrs:{model:e.formData,rules:e.rules}},[n("bk-form-item",{attrs:{label:e.$t("任务类型"),required:!0,property:"taskType"}},[n("bk-select",{staticClass:"bk-select-inline",attrs:{loading:e.loadingStatus.taskType,"popover-width":260,clearable:!1,placeholder:e.$t("请选择任务类型")},on:{change:e.checkPermission},model:{value:e.formData.taskType,callback:function(t){e.$set(e.formData,"taskType",t)},expression:"formData.taskType"}},e._l(e.taskTypeList,(function(e){return n("bk-option",{key:e.value,attrs:{id:e.value,name:e.name}})})),1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowtaskError,expression:"isShowtaskError"}],staticClass:"error-info"},[e._v(e._s(e.$t("请选择任务类型")))])],1),e._v(" "),n("bk-form-item",{attrs:{label:e.$t("项目名称"),required:!0,property:"selectedProject"}},[n("bk-select",{staticClass:"bk-select-inline",attrs:{loading:e.loadingStatus.project,"popover-width":260,clearable:!1,searchable:!0,placeholder:e.$t("请选择项目")},on:{change:e.checkPermission},model:{value:e.formData.selectedProject,callback:function(t){e.$set(e.formData,"selectedProject",t)},expression:"formData.selectedProject"}},e._l(e.projectList,(function(e){return n("bk-option",{key:e.value,attrs:{id:e.id,name:e.name}})})),1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowProjectError,expression:"isShowProjectError"}],staticClass:"error-info"},[e._v(e._s(e.$t("请选择项目")))])],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("bk-button",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!e.hasUseCommonTplPerm},expression:"{ active: !hasUseCommonTplPerm }"}],class:{"btn-permission-disable":!e.hasUseCommonTplPerm},attrs:{theme:"primary",loading:e.permissionLoading},on:{click:e.onConfirm}},[e._v("\n            "+e._s(e.$t("确定"))+"\n        ")]),e._v(" "),n("bk-button",{on:{click:e.onCancel}},[e._v(e._s(e.$t("取消")))])],1)])}),[],!1,null,"38943cd2",null).exports);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U={name:"MyCollection",components:{BaseCard:y.a,PanelNodata:p,AddCollectionDialog:L,SelectCreateTaskDialog:M},mixins:[j.a],data:function(){return{createTaskItem:{},collectionList:[],collectionGrounpList:[],categorySwitchMap:{},isShowAdd:!1,isDeleteDialogShow:!1,deleteCollectLoading:!1,isCreateTaskDialogShow:!1,collectionBodyLoading:!1,limit:4}},created:function(){this.onWindowResize=h.a.debounce(this.handlerWindowResize,300)},mounted:function(){var e=this;return s()(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.addEventListener("resize",e.onWindowResize,!1),t.next=3,e.initData();case 3:e.handlerWindowResize();case 4:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){window.removeEventListener("resize",this.onWindowResize,!1)},methods:N(N({},Object(m.b)(["deleteCollect","loadCollectList"])),{},{initData:function(){var e=this;return s()(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.collectionBodyLoading=!0,t.next=4,e.loadCollectList();case 4:n=t.sent,e.collectionList=n.objects,e.collectionGrounpList=e.getGrounpList(n.objects),e.collectionBodyLoading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},getLimit:function(){return document.body.clientWidth>1920?6:4},getGrounpList:function(e){var t=this,n=[],i=[];return e.forEach(function(e){k()(this,t);var a=i.indexOf(e.category);a>-1?n[a].childrens.push(e):(n.push({name:this.getCategoryChineseName(e.category),key:e.category,childrens:[e]}),i.push(e.category),this.$set(this.categorySwitchMap,e.category,!1))}.bind(this)),n},getCategoryChineseName:function(e){return{flow:l.a.t("项目流程"),common_flow:l.a.t("公共流程"),mini_app:l.a.t("轻应用"),periodic_task:l.a.t("周期任务")}[e]},onSwitchCategory:function(e){this.categorySwitchMap[e]=!this.categorySwitchMap[e]},onAddCollection:function(){this.isShowAdd=!0},onCloseDialog:function(e){e&&this.initData(),this.isShowAdd=!1},onDeleteCard:function(e){this.isDeleteDialogShow=!0,this.deleteCollectId=e.id},onDeleteConfirm:function(){var e=this;return s()(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.deleteCollectLoading=!0,t.next=3,e.deleteCollect(e.deleteCollectId);case 3:e.deleteCollectLoading=!1,e.isDeleteDialogShow=!1,e.initData();case 6:case"end":return t.stop()}}),t)})))()},onDeleteCancel:function(){this.isDeleteDialogShow=!1},onCardClick:function(e){if(this.getRourcePerm(e))return this.checkForPermission(e);window.reportInfo({page:"home",zone:"collectedCard",event:"click"});var t=e.category,n=e.extra_info,i=n.project_id,a=n.template_id,r=n.app_id,s=n.name;switch(t){case"common_flow":this.openSelectCreateTask(e);break;case"flow":this.$router.push({name:"taskCreate",params:{step:"selectnode",project_id:i},query:{template_id:a}});break;case"periodic_task":this.$router.push({name:"periodicTemplate",params:{project_id:i},query:{q:s}});break;case"mini_app":var o=this.$router.resolve({name:"appmakerTaskCreate",params:{step:"selectnode",app_id:r,project_id:i},query:{template_id:a}}).href;window.open(o,"_blank")}},openSelectCreateTask:function(e){this.isCreateTaskDialogShow=!0,this.createTaskItem=e},getRourcePerm:function(e){return"flow"===e.category&&!this.hasPermission(["flow_create_task"],e.auth_actions)},checkForPermission:function(e){"flow"===e.category&&(e.name=e.extra_info.name,this.applyForPermission(["flow_create_task"],e.auth_actions,{flow:[e],project:[{id:e.extra_info.project_id,name:e.extra_info.project_name}]}))},onHideCreateTask:function(){this.isCreateTaskDialogShow=!1},handlerWindowResize:function(){var e=document.querySelector(".my-collection .card-list"),t=document.querySelector(".my-collection .card-list .card-item");this.collectionList&&0!==this.collectionList.length&&e&&t&&(this.limit=Math.floor(e.offsetWidth/t.offsetWidth))}})},A=(n(1238),Object(u.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.collectionBodyLoading,opacity:1,zIndex:100},expression:"{ isLoading: collectionBodyLoading, opacity: 1, zIndex: 100 }"}],staticClass:"my-collection"},[n("h3",{staticClass:"panel-title"},[e._v("\n        "+e._s(e.$t("我的收藏"))+"\n        "),n("span",{staticClass:"add-btn",on:{click:e.onAddCollection}},[e._v(e._s(e.$t("添加")))])]),e._v(" "),e._l(e.collectionGrounpList,(function(t,i){return n("div",{key:i,staticClass:"category-item"},[n("h4",{staticClass:"grounp-name"},[e._v("\n            "+e._s(t.name)+"\n            "),t.childrens.length>e.limit?n("span",{class:["switch-btn","common-icon-arrow-down",{"flip-icon":e.categorySwitchMap[t.key]}],on:{click:function(n){return n.stopPropagation(),e.onSwitchCategory(t.key)}}}):e._e()]),e._v(" "),n("ul",{class:["card-list",{"show-all":e.categorySwitchMap[t.key]}]},e._l(t.childrens,(function(t,i){return n("base-card",{key:i,attrs:{data:t,"set-name":t.extra_info.name,"is-apply-permission":e.getRourcePerm(t),"show-delete":!e.getRourcePerm(t)},on:{onCardClick:e.onCardClick,onDeleteCard:e.onDeleteCard}})})),1)])})),e._v(" "),e.collectionGrounpList.length?e._e():n("panel-nodata",[n("span",{staticClass:"link-text",on:{click:e.onAddCollection}},[e._v(e._s(e.$t("添加")))]),e._v(" "),n("span",[e._v(e._s(e.$t("常用流程到收藏夹，可作为你的流程管理快捷入口")))])]),e._v(" "),n("add-collection-dialog",{attrs:{"collection-list":e.collectionList,"is-add-collection-dialog-show":e.isShowAdd},on:{onCloseDialog:e.onCloseDialog}}),e._v(" "),n("select-create-task-dialog",{attrs:{"create-task-item":e.createTaskItem,"is-create-task-dialog-show":e.isCreateTaskDialogShow},on:{cancel:e.onHideCreateTask}}),e._v(" "),n("bk-dialog",{attrs:{width:"400","ext-cls":"common-dialog",theme:"primary","mask-close":!1,"header-position":"left",title:e.$t("删除"),value:e.isDeleteDialogShow},on:{confirm:e.onDeleteConfirm,cancel:e.onDeleteCancel}},[n("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.deleteCollectLoading,opacity:1,zIndex:100},expression:"{ isLoading: deleteCollectLoading, opacity: 1, zIndex: 100 }"}],staticStyle:{padding:"30px"}},[e._v("\n            "+e._s(e.$t("确认删除收藏？"))+"\n        ")])])],2)}),[],!1,null,"5366e1cc",null).exports),B=n(685);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=[{label:"ID",prop:"id",width:100},{label:l.a.t("任务名称"),prop:"name",min_width:300},{label:l.a.t("项目"),prop:"project"},{label:l.a.t("执行开始"),prop:"start_time",width:200},{label:l.a.t("执行结束"),prop:"finish_time",width:200},{label:l.a.t("创建方式"),prop:"create_method",width:150},{label:l.a.t("状态"),prop:"status",width:100}],V={name:"MyDynamic",components:{NoData:C.a},mixins:[j.a,B.a],data:function(){return{createMethods:[{name:l.a.t("所有创建方式"),value:"all"}],dynamicData:[],executeStatus:[],pagination:{current:1,count:0,"limit-list":[10],"show-limit":!1,limit:10},tableColumn:q,isTableLoading:!1,isCreateMethodsLoading:!1,currentMethod:"all"}},computed:R({},Object(m.e)({username:function(e){return k()(this,void 0),e.username}.bind(void 0)})),created:function(){var e=this;return s()(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCreateMethods();case 2:e.getTaskList();case 3:case"end":return t.stop()}}),t)})))()},methods:R(R(R({},Object(m.b)("taskList/",["loadTaskList"])),Object(m.b)("task/",["loadCreateMethod"])),{},{getTaskList:function(){var e=this;return s()(c.a.mark((function t(){var n,i,a=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isTableLoading=!0,t.prev=1,n={limit:e.pagination.limit,offset:0,pipeline_instance__is_started:!0,creator_or_executor:e.username,create_method:"all"===e.currentMethod?void 0:e.currentMethod},t.next=5,e.loadTaskList(n);case 5:i=t.sent,e.getExecuteStatus("executeStatus",i.objects),e.dynamicData=i.objects,e.dynamicData.forEach(function(t){var n=this;k()(this,a);var i=e.createMethods.find(function(e){return k()(this,n),e.value===t.create_method}.bind(this));i&&(t.create_method=i.name)}.bind(this)),e.isTableLoading=!1,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,this,[[1,12]])})))()},getCreateMethods:function(){var e=this;return s()(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.isCreateMethodsLoading=!0,t.next=4,e.loadCreateMethod();case 4:n=t.sent,e.createMethods=[].concat(T()(e.createMethods),T()(n.data)),e.isCreateMethodsLoading=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},onSelectMethod:function(e){this.currentMethod=e,this.getTaskList()},onTaskPermissonCheck:function(e,t){var n=t.id,i=t.name,a=t.project,r={task:[{id:n,name:i}],project:[{id:a.id,name:a.name}]};this.applyForPermission(e,t.auth_actions,r)}})},F=(n(1239),Object(u.a)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-dynamic"},[n("h3",{staticClass:"panel-title"},[n("span",{staticClass:"panel-name"},[e._v(e._s(e.$t("我的动态")))]),e._v(" "),n("div",{staticClass:"create-method"},[n("bk-select",{staticClass:"bk-select-inline",attrs:{loading:e.isCreateMethodsLoading,"popover-width":260,clearable:!1,placeholder:e.$t("请选择")},on:{selected:e.onSelectMethod},model:{value:e.currentMethod,callback:function(t){e.currentMethod=t},expression:"currentMethod"}},e._l(e.createMethods,(function(e){return n("bk-option",{key:e.value,attrs:{id:e.value,name:e.name}})})),1)],1)]),e._v(" "),n("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.isTableLoading,opacity:1,zIndex:100},expression:"{ isLoading: isTableLoading, opacity: 1, zIndex: 100 }"}],staticClass:"tab-data-table",attrs:{data:e.dynamicData,pagination:e.pagination}},[e._l(e.tableColumn,(function(t){return n("bk-table-column",{key:t.prop,attrs:{label:t.label,prop:t.prop,width:t.hasOwnProperty("width")?t.width:"auto","min-width":t.min_width,sortable:t.sortable},scopedSlots:e._u([{key:"default",fn:function(i){return["status"===t.prop?[n("div",{staticClass:"ui-task-status"},[n("span",{class:e.executeStatus[i.$index].cls}),e._v(" "),n("span",[e._v(e._s(e.executeStatus[i.$index].text))])])]:"name"===t.prop?[e.hasPermission(["task_view"],i.row.auth_actions)?n("router-link",{staticClass:"task-name",attrs:{title:i.row.name,to:{name:"taskExecute",params:{project_id:i.row.project.id},query:{instance_id:i.row.id}}}},[e._v("\n                        "+e._s(i.row[t.prop])+"\n                    ")]):n("a",{directives:[{name:"cursor",rawName:"v-cursor"}],staticClass:"text-permission-disable",attrs:{title:i.row.name},on:{click:function(t){return e.onTaskPermissonCheck(["task_view"],i.row)}}},[e._v("\n                        "+e._s(i.row[t.prop])+"\n                    ")])]:"project"===t.prop?[e._v("\n                    "+e._s(i.row[t.prop].name)+"\n                ")]:[e._v("\n                    "+e._s(i.row[t.prop]||"--")+"\n                ")]]}}],null,!0)})})),e._v(" "),n("div",{staticClass:"empty-data",attrs:{slot:"empty"},slot:"empty"},[n("no-data")],1)],2)],1)}),[],!1,null,"0d6d8fd9",null).exports);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var H={name:"CopyrightFooter",computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(m.e)({footer:function(e){return k()(this,void 0),e.footer}.bind(void 0)}))},K=(n(1240),{name:"HomePage",components:{CommonUsed:_,MyCollection:A,MyDynamic:F,CopyrightFooter:Object(u.a)(H,(function(){var e=this.$createElement;return(this._self._c||e)("footer",{attrs:{id:"page-footer-wrapper"},domProps:{innerHTML:this._s(this.footer)}})}),[],!1,null,null,null).exports}}),J=(n(1241),Object(u.a)(K,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"home-page"},[t("common-used"),this._v(" "),t("my-collection"),this._v(" "),t("my-dynamic"),this._v(" "),t("copyright-footer")],1)}),[],!1,null,"63568616",null));t.default=J.exports},611:function(e,t,n){"use strict";var i={name:"NoData",props:{message:{type:String,default:function(){return""}}}},a=(n(634),n(9)),r=Object(a.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"no-data-wrapper"},[n("div",{staticClass:"no-data"},[n("i",{staticClass:"common-icon-no-data"}),e._v(" "),n("p",{staticClass:"no-data-wording"},[e._t("default",(function(){return[e._v(e._s(e.message||e.$t("无数据")))]}))],2)])])}),[],!1,null,"03c0cb01",null);t.a=r.exports},625:function(e,t,n){},634:function(e,t,n){"use strict";n(625)},685:function(e,t,n){"use strict";n(26),n(38),n(37),n(49),n(22),n(50);var i=n(16),a=n.n(i),r=n(0),s=n.n(r),o=n(5),c=n.n(o),l=n(4),d=n.n(l),u=(n(127),n(184),n(7)),p=n(1);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={methods:h(h({},Object(u.b)("task/",["getInstanceStatus"])),{},{getExecuteStatus:function(e,t){var n=this;this[e]=t.map(function(t,i){s()(this,n);var a={};return t.is_expired?(a.cls="expired bk-icon icon-clock-shape",a.text=p.a.t("已过期")):t.is_finished?(a.cls="finished bk-icon icon-check-circle-shape",a.text=p.a.t("完成")):t.is_revoked?(a.cls="revoke common-icon-dark-circle-shape",a.text=p.a.t("撤销")):t.is_started?(a.cls="loading common-icon-loading",this.getExecuteDetail(e,t,i)):(a.cls="created common-icon-dark-circle-shape",a.text=p.a.t("未执行")),a}.bind(this))},getExecuteDetail:function(e,t,n){var i=this;return a()(d.a.mark((function a(){var r,s,o,c;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={instance_id:t.id,project_id:t.project.id},a.prev=1,a.next=4,i.getInstanceStatus(r);case 4:if(!(s=a.sent).result){a.next=28;break}o=s.data.state,c={},a.t0=o,a.next="RUNNING"===a.t0||"BLOCKED"===a.t0?11:"READY"===a.t0?14:"SUSPENDED"===a.t0?17:"NODE_SUSPENDED"===a.t0?20:"FAILED"===a.t0?23:26;break;case 11:return c.cls="running common-icon-dark-circle-ellipsis",c.text=p.a.t("执行中"),a.abrupt("break",27);case 14:return c.cls="running common-icon-dark-circle-ellipsis",c.text=p.a.t("排队中"),a.abrupt("break",27);case 17:return c.cls="execute common-icon-dark-circle-pause",c.text=p.a.t("暂停"),a.abrupt("break",27);case 20:return c.cls="execute",c.text=p.a.t("节点暂停"),a.abrupt("break",27);case 23:return c.cls="failed common-icon-dark-circle-close",c.text=p.a.t("失败"),a.abrupt("break",27);case 26:c.text=p.a.t("未知");case 27:i[e].splice(n,1,c);case 28:a.next=33;break;case 30:a.prev=30,a.t1=a.catch(1),console.log(a.t1);case 33:case"end":return a.stop()}}),a,null,[[1,30]])})))()}})};t.a=f},790:function(e,t,n){},907:function(e,t,n){"use strict";n(790)},995:function(e,t,n){"use strict";n(26),n(38),n(37),n(49),n(22),n(50);var i=n(5),a=n.n(i),r=n(0),s=n.n(r),o=(n(23),n(7));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={name:"BaseCard",props:{data:{type:Object,default:function(){return s()(this,void 0),{}}.bind(void 0)},isApplyPermission:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},showDelete:{type:Boolean,default:!1},setName:{type:String,default:""},iconText:{type:String,default:""}},computed:l(l({},Object(o.e)({lang:function(e){return s()(this,void 0),e.lang}.bind(void 0)})),{},{displayName:function(){return this.setName||this.data.name}}),methods:{onDeleteCard:function(){this.$emit("onDeleteCard",this.data)},onCardClick:function(){this.$emit("onCardClick",this.data)}}},u=(n(907),n(9)),p=Object(u.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{class:["card-item",{"permission-disable":e.isApplyPermission},{selected:e.selected}],on:{click:e.onCardClick}},[e.iconText?n("div",{class:["card-icon","type-icon",{"zh-en":"en"===e.lang}]},[e._v("\n        "+e._s(e.iconText)+"\n    ")]):n("div",{staticClass:"card-icon"},[e._v("\n        "+e._s(e.displayName.trim().substr(0,1).toUpperCase())+"\n    ")]),e._v(" "),n("div",{staticClass:"card-content"},[n("p",{staticClass:"text"},[e._v(e._s(e.displayName))])]),e._v(" "),e.isApplyPermission?n("div",{staticClass:"apply-permission-mask"},[n("bk-button",{attrs:{theme:"primary",size:"small"}},[e._v(e._s(e.$t("申请权限")))])],1):e._e(),e._v(" "),e.showDelete?n("div",{staticClass:"card-delete common-icon-dark-circle-close",on:{click:function(t){return t.stopPropagation(),e.onDeleteCard.apply(null,arguments)}}}):e._e()])}),[],!1,null,"2e844ee3",null);t.a=p.exports}}]);