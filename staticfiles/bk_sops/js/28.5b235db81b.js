(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1181:function(e,t,n){},1435:function(e,t,n){"use strict";n(1181)},597:function(e,t,n){"use strict";n.r(t);n(26),n(38),n(37),n(49),n(22),n(50);var i=n(16),r=n.n(i),a=n(0),s=n.n(a),o=n(5),u=n.n(o),c=n(4),d=n.n(c),m=(n(68),n(23),n(80),n(7)),h=n(12),l=n(1),p=n(666);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=[{name:l.a.t("搜索"),routerName:"adminSearch"},{name:l.a.t("周期任务"),routerName:"adminPeriodic"},{name:l.a.t("远程插件包源管理"),routerName:"sourceManage"},{name:l.a.t("远程插件同步"),routerName:"sourceSync"}],g={name:"Manage",components:{PageHeader:p.a},data:function(){return{editPermLoading:!0,hasViewPerm:!1,hasEditPerm:!1,routers:P}},computed:b(b({},Object(m.e)({hasAdminPerm:function(e){return s()(this,void 0),e.hasAdminPerm}.bind(void 0),permissionMeta:function(e){return s()(this,void 0),e.permissionMeta}.bind(void 0)})),{},{hideRoutersNav:function(){return["packageEdit","cacheEdit"].includes(this.$route.name)}}),watch:{hasAdminPerm:function(e){e?(this.hasViewPerm=!0,this.queryEditPerm()):this.showPermissionApplyPage()}},created:function(){null!==this.hasAdminPerm&&(!1===this.hasAdminPerm?this.showPermissionApplyPage():(this.hasViewPerm=!0,this.queryEditPerm()))},methods:b(b({},Object(m.b)(["queryUserPermission"])),{},{queryEditPerm:function(){var e=this;return r()(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.queryUserPermission({action:"admin_edit"});case 3:n=t.sent,e.hasEditPerm=n.data.is_allow,e.editPermLoading=!1,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},showPermissionApplyPage:function(){var e=this,t=this.permissionMeta.system.find(function(t){return s()(this,e),"bk_sops"===t.id}.bind(this)),n=this.permissionMeta.actions.find(function(t){return s()(this,e),"admin_view"===t.id}.bind(this)).name,i={system_id:t.id,system_name:t.name,actions:[{id:"admin_view",name:n,related_resource_types:[]}]};h.a.$emit("togglePermissionApplyPage",!0,"other",i)}})},v=(n(1435),n(9)),y=Object(v.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:null===e.hasAdminPerm,opacity:0,zIndex:100},expression:"{ isLoading: hasAdminPerm === null, opacity: 0, zIndex: 100 }"}],staticClass:"page-manage"},[e.hasViewPerm?[e.hideRoutersNav?e._e():n("page-header",{attrs:{"tab-list":e.routers}}),e._v(" "),n("div",{class:["page-manage-content",{"has-nav":!e.hideRoutersNav}]},[n("router-view",{attrs:{"has-edit-perm":e.hasEditPerm,"edit-perm-loading":e.editPermLoading}})],1)]:e._e()],2)}),[],!1,null,"7b661f1e",null);t.default=y.exports},621:function(e,t){"function"!=typeof window.gettext&&(window.gettext=function(e){return e})},645:function(e,t,n){},666:function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=(n(23),n(621),{name:"PageHeader",inject:["reload"],props:{selfReload:{type:Boolean,default:!1},tabList:{type:Array,default:function(){return r()(this,void 0),[]}.bind(void 0)}},methods:{tabChange:function(e){if(this.$route.name===e.routerName)return this.selfReload?this.$emit("tabChange",e):this.reload(),!1;this.$router.push({name:e.routerName,params:e.params,query:e.query})}}}),s=(n(667),n(9)),o=Object(s.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-header"},[e._t("default",(function(){return[e.tabList.length?n("ul",{staticClass:"tab-list"},e._l(e.tabList,(function(t,i){return n("li",{key:i,class:["tab-item",{active:e.$route.name===t.routerName}],on:{click:function(n){return e.tabChange(t)}}},[e._v("\n                "+e._s(t.name)+"\n            ")])})),0):e._e()]})),e._v(" "),n("div",{staticClass:"expand"},[e._t("expand")],2)],2)}),[],!1,null,"7b08c71f",null);t.a=o.exports},667:function(e,t,n){"use strict";n(645)}}]);