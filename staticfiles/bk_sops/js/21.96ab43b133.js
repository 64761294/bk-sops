(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1184:function(t,e,a){},1185:function(t,e,a){},1186:function(t,e,a){},1438:function(t,e,a){"use strict";a(1184)},1439:function(t,e,a){"use strict";a(1185)},1440:function(t,e,a){"use strict";a(1186)},574:function(t,e,a){"use strict";a.r(e);a(26),a(38),a(37),a(49),a(50);var s=a(0),i=a.n(s),n=a(16),r=a.n(n),c=a(5),o=a.n(c),l=(a(22),a(4)),u=a.n(l),_=a(7),v=a(102),d=(a(23),a(80),a(101),a(39),a(185),a(788)),p=a(611),m={name:"PackageTable",components:{NoData:p.a},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{detailFields:this.getSourceKeys(this.value.type)}},computed:{packageName:function(){var t=this;return d.a.filter(function(e){return i()(this,t),e.type===this.value.type}.bind(this))[0].name}},methods:{getSourceKeys:function(t){var e=this,a=[],s=d.a.find(function(a){return i()(this,e),a.type===t}.bind(this));for(var n in s.keys)a.push({id:n,name:s.keys[n].name});return a}}},h=(a(1438),a(9)),b=Object(h.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"package-table"},[a("table",[a("tbody",[a("tr",[a("th",{staticClass:"source-label"},[t._v(t._s(t.$t("名称")))]),t._v(" "),a("td",{staticClass:"source-content-item"},[t._v(t._s(t.value.name))])]),t._v(" "),a("tr",[a("th",{staticClass:"source-label"},[t._v(t._s(t.$t("类型")))]),t._v(" "),a("td",{staticClass:"source-content-item"},[t._v(t._s(t.packageName))])]),t._v(" "),a("tr",[a("th",{staticClass:"source-label"},[t._v(t._s(t.$t("描述")))]),t._v(" "),a("td",{staticClass:"source-content-item"},[t._v(t._s(t.value.desc))])]),t._v(" "),a("tr",[a("th",{staticClass:"source-label"},[t._v(t._s(t.$t("详细信息")))]),t._v(" "),a("td",{staticClass:"source-content-item"},[a("table",{staticClass:"detail-table"},[a("tbody",t._l(t.detailFields,(function(e){return a("tr",{key:e.id},[a("th",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(t.value.details[e.id]))])])})),0)])])]),t._v(" "),a("tr",[a("th",{staticClass:"source-label"},[t._v(t._s(t.$t("模块配置")))]),t._v(" "),a("td",{staticClass:"source-content-item"},[a("table",{staticClass:"content-item-table"},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("根模块")))]),t._v(" "),a("th",[t._v(t._s(t.$t("版本")))]),t._v(" "),a("th",[t._v(t._s(t.$t("导入模块")))])])]),t._v(" "),a("tbody",t._l(t.value.packages,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s))]),t._v(" "),a("td",[t._v(t._s(e.version))]),t._v(" "),a("td",t._l(e.modules,(function(e,s){return a("p",{key:s},[t._v(t._s(e))])})),0)])})),0)])])]),t._v(" "),a("tr",[a("th",{staticClass:"source-label"},[t._v(t._s(t.$t("已导入插件")))]),t._v(" "),a("td",{staticClass:"source-content-item"},[a("table",{staticClass:"content-item-table"},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("插件名")))]),t._v(" "),a("th",[t._v(t._s(t.$t("类名")))]),t._v(" "),a("th",[t._v(t._s(t.$t("所属模块")))])])]),t._v(" "),t.value.imported_plugins&&t.value.imported_plugins.length?a("tbody",t._l(t.value.imported_plugins,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.group_name)+"-"+t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.class_name))]),t._v(" "),a("td",[t._v(t._s(e.module))])])})),0):t._e()]),t._v(" "),t.value.imported_plugins&&!t.value.imported_plugins.length?a("NoData",{staticClass:"local-no-data"}):t._e()],1)])])])])}),[],!1,null,"ee07837c",null).exports,f={name:"LocalCache",props:{value:{type:Object,default:function(){return{}}}},data:function(){return{detailFields:this.getSourceKeys(this.value.type)}},methods:{getSourceKeys:function(t){var e=this,a=[],s=d.a.find(function(a){return i()(this,e),a.type===t}.bind(this));for(var n in s.keys)a.push({id:n,name:s.keys[n].name});return a}}};a(1439);function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){o()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var k={name:"SourceManage",components:{PackageTable:b,LocalCache:Object(h.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"local-cache"},[a("table",[a("tbody",[a("tr",[a("th",{staticClass:"cache-label"},[t._v(t._s(t.$t("名称")))]),t._v(" "),a("td",{staticClass:"cache-content-item"},[t._v(t._s(t.value.name))])]),t._v(" "),a("tr",[a("th",{staticClass:"cache-label"},[t._v(t._s(t.$t("类型")))]),t._v(" "),a("td",{staticClass:"cache-content-item"},[t._v(t._s(t.value.type))])]),t._v(" "),a("tr",[a("th",{staticClass:"cache-label"},[t._v(t._s(t.$t("描述")))]),t._v(" "),a("td",{staticClass:"cache-content-item"},[t._v(t._s(t.value.desc))])]),t._v(" "),a("tr",[a("th",{staticClass:"cache-label"},[t._v(t._s(t.$t("详细信息")))]),t._v(" "),a("td",{staticClass:"cache-content-item"},[a("table",{staticClass:"detail-table"},[a("tbody",t._l(t.detailFields,(function(e){return a("tr",{key:e.id},[a("th",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(t.value.details[e.id]))])])})),0)])])])])])])}),[],!1,null,"139d4796",null).exports,NoData:p.a},mixins:[v.a],props:{hasEditPerm:Boolean,editPermLoading:Boolean},data:function(){return{emptyData:!1,originList:[],cacheList:[],loading:!0}},created:function(){this.loadData()},methods:y(y({},Object(_.b)("manage",["loadPackageSource"])),{},{loadData:function(){var t=this;return r()(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.loadPackageSource();case 4:0===(a=e.sent).objects.length?t.emptyData=!0:t.transformData(a.objects),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})))()},transformData:function(t){var e=this,a=[],s=[];t.forEach(function(t){i()(this,e),"origin"===t.category?a.push(t):s.push(t)}.bind(this)),this.originList=a,this.cacheList=s},applyEditPerm:function(){this.editPermLoading||this.applyForPermission(["admin_edit"])}})},C=(a(1440),Object(h.a)(k,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading,opacity:1,zIndex:100},expression:"{ isLoading: loading, opacity: 1, zIndex: 100 }"}],staticClass:"source-manage"},[a("div",{staticClass:"operate-area"},[t.hasEditPerm?a("router-link",{staticClass:"bk-button bk-primary",attrs:{to:{name:"packageEdit"}}},[t._v("\n            "+t._s(t.emptyData?t.$t("新建"):t.$t("编辑"))+"\n        ")]):a("bk-button",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!0},expression:"{ active: true }"}],staticClass:"btn-permission-disable",attrs:{theme:"primary"},on:{click:t.applyEditPerm}},[t._v("\n            "+t._s(t.emptyData?t.$t("新建"):t.$t("编辑"))+"\n        ")])],1),t._v(" "),t.originList.length?a("div",[a("div",{staticClass:"section-title"},[a("div",{staticClass:"title-wrapper"},[a("h4",[t._v(t._s(t.$t("主包源")))]),t._v(" "),a("i",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.right",value:t.$t("远程插件包存储源，可以配置多个，注意插件包根模块名字不能冲突"),expression:"$t('远程插件包存储源，可以配置多个，注意插件包根模块名字不能冲突')",modifiers:{right:!0}}],staticClass:"title-tooltip common-icon-info"})])]),t._v(" "),t._l(t.originList,(function(t){return a("package-table",{key:t.id,attrs:{value:t}})}))],2):t._e(),t._v(" "),t.originList.length?a("div",[a("div",{staticClass:"section-title"},[a("div",{staticClass:"title-wrapper"},[a("h4",[t._v(t._s(t.$t("本地缓存")))]),t._v(" "),a("i",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.right",value:t.$t("可选配置，所有远程插件源都可以同步到本地进行缓存，避免在不能访问远程插件源时无法加载标准插件"),expression:"$t('可选配置，所有远程插件源都可以同步到本地进行缓存，避免在不能访问远程插件源时无法加载标准插件')",modifiers:{right:!0}}],staticClass:"title-tooltip common-icon-info"})])]),t._v(" "),t._l(t.cacheList,(function(t){return a("local-cache",{key:t.id,attrs:{value:t}})})),t._v(" "),a("div",{staticClass:"cache-empty"},[t.cacheList.length?t._e():a("NoData")],1)],2):t._e(),t._v(" "),t.emptyData?a("div",{staticClass:"empty-data"},[a("p",[t._v(t._s(t.$t("无数据，"))+"\n            "),t.hasEditPerm?a("router-link",{attrs:{to:{name:"packageEdit"}}},[t._v(t._s(t.$t("新建")))]):a("a",{directives:[{name:"cursor",rawName:"v-cursor",value:{active:!0},expression:"{ active: true }"}],staticClass:"text-permission-disable",on:{click:t.applyEditPerm}},[t._v("\n                "+t._s(t.$t("新建"))+"\n            ")]),t._v("\n            "+t._s(t.$t("远程插件包源"))+"\n        ")],1)]):t._e()])}),[],!1,null,"23933888",null));e.default=C.exports},611:function(t,e,a){"use strict";var s={name:"NoData",props:{message:{type:String,default:function(){return""}}}},i=(a(634),a(9)),n=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"no-data-wrapper"},[a("div",{staticClass:"no-data"},[a("i",{staticClass:"common-icon-no-data"}),t._v(" "),a("p",{staticClass:"no-data-wording"},[t._t("default",(function(){return[t._v(t._s(t.message||t.$t("无数据")))]}))],2)])])}),[],!1,null,"03c0cb01",null);e.a=n.exports},625:function(t,e,a){},634:function(t,e,a){"use strict";a(625)},788:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var s=a(1),i=[{type:"git",name:s.a.t("GIT"),keys:{repo_address:{name:s.a.t("仓库链接"),placeholder:s.a.t("请输入 GIT 仓库地址，如 https://github.com/bk-sops/plugins_example.git")},repo_raw_address:{name:s.a.t("文件托管仓库链接"),placeholder:s.a.t("请输入仓库中文件的 Raw 链接的前缀，如 https://raw.githubusercontent.com/bk-sops/plugins_example/")},branch:{name:s.a.t("分支名"),placeholder:s.a.t("请输入分支名")}}},{type:"s3",name:s.a.t("S3"),keys:{service_address:{name:s.a.t("对象存储服务地址"),placeholder:s.a.t("请输入")},bucket:{name:s.a.t("Bucket"),placeholder:s.a.t("请输入")},source_dir:{name:s.a.t("子目录"),placeholder:s.a.t("请输入")},access_key:{name:s.a.t("Access Key"),placeholder:s.a.t("请输入")},secret_key:{name:s.a.t("Secret Key"),placeholder:s.a.t("请输入")}}},{type:"fs",name:s.a.t("文件系统"),keys:{path:{name:s.a.t("服务器文件系统路径"),placeholder:s.a.t("请输入")}}}]}}]);